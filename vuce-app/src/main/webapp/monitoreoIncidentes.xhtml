<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    template="master.xhtml">
    <ui:define name="content">


        <h:outputStylesheet  name="bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css"/>       

        <h:outputScript name="js/vuce-chart.js"/> 
        <h:outputScript name="js/monitoreoIncidentes.js"/> 

        <h:outputScript name="bower_components/datatables.net/js/jquery.dataTables.min.js"/> 


        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
               Monitoreo de Incidentes     
            </h1>           
        </section>


        <!-- Main content -->
        <section class="content container-fluid">




            <form id="form-search" method="GET">
                <div class="col-md-12" style="padding-right: 1px; padding-left: 1px;">
                    <!-- general form elements -->
                    <div class="box box-danger">
                        <div class="box-header with-border">
                            <h3 class="box-title"><small></small></h3>   

                            <a href="#" title="Configuracion"  data-toggle="tooltip" class="pull-right">
                                <p:graphicImage style="width: 35px;" library="images" name="gear.png" styleClass="pull-right" />

                            </a>

                        </div>                  
                        <div class="box-body">
                            <div class="form-group">
                                <div style="margin: 10px 0px 0px 0px;">
                                    <label for="unidad-organica" class="col-sm-12 col-md-12 col-lg-2 control-label text-left">Entidad</label>
                                    <div class="col-sm-12 col-md-12 col-lg-3" style="margin-bottom: 8px;">
                                        <select name="entidades" class="selectpicker show-menu-arrow form-control" multiple="multiple" data-max-options="10" id="entidades"/>
                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-2" style="margin-bottom: 8px;">
                                        <button type="button" class="btn btn-block btn-primary"  id="filtrar-incidentes">Filtrar Incidentes</button>
                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-2" style="margin-bottom: 8px;">
                                        <button type="button" class="btn btn-block btn-primary">Enviar Informe de Incidentes</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

            <div class="row">
                <div class="col-md-6">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa fa-bar-chart"></i>
                            <h3 class="box-title text-danger">Transacciones</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center" id="parent-transacciones-procesadas">
                            <canvas id="transacciones-procesadas"></canvas>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.col -->

                <!-- /.col -->

                <div class="col-md-6">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa fa-bar-chart"></i>
                            <h3 class="box-title text-warning">Notificaciones</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center" id="parent-notificaciones-incidencias">
                            <canvas id="notificaciones-incidencias"></canvas>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>

                <div class="col-md-12">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa  fa-table"></i>
                            <h3 class="box-title text-warning">Transacciones con incidentes</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">
                            <div class="form-group" style="margin: 10px 0px 45px 0px;">
                                <div>

                                    <div class="col-sm-12 col-md-12 col-lg-4">
                                        <div title="Breve explicacion sobre el tipo de incidente" class="tipo-transacciones tipo-transacciones-1" data-toggle="tooltip"></div>
                                        <label>Incumplimiento del tiempo de disponibilidad de la transaccion</label>

                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-4">
                                        <div title="Breve explicacion sobre el tipo de incidente" class="tipo-transacciones tipo-transacciones-2" data-toggle="tooltip"></div>
                                        <label>Incumplimiento del tiempo de confirmacion de la transaccion</label>
                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-4">
                                        <div title="Breve explicacion sobre el tipo de incidente" class="tipo-transacciones tipo-transacciones-3" data-toggle="tooltip"></div>
                                        <label>Transaccion procesada incorrectamente en la entidad</label>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-12">
                                <table id="tb-transaccion-incidente" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="tb-transaccion-incidente">
                                    <thead>
                                        <tr role="row">
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1"></th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Tipo</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Entidad</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Id</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Mensaje</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Tipo Doc.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Nro Doc.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Tama√±o</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Fec. Creaci.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Fec. Lectura.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Fec. Confir.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Antiguedad.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Cant. Lectura</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">XML</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">EbXML</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>


                            </div>

                            <div>
                                <div class="col-sm-12 col-md-12 col-lg-2 pull-right" style="margin-bottom: 8px;margin-top: 25px;">
                                    <button type="button" class="btn btn-block btn-primary" data-toggle="modal" data-target="#modal-reenviar-transacciones">Reenviar transacciones</button>
                                </div>

                                <div class="modal fade" id="modal-reenviar-transacciones">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">x</span></button>
                                                <h4 class="modal-title">Confirmacion</h4>
                                            </div>
                                            <div class="modal-body">
                                                <p>Esta Seguro de Reenviar las Tramisiones?</p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cerrar</button>
                                                <button type="button" class="btn btn-primary" id="btn-renviar-trasmisiones">Enviar</button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>

                                <div class="modal fade" id="modal-reenviar-transacciones-response">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">x</span></button>
                                                <h4 class="modal-title">Respuesta Transaccion</h4>
                                            </div>
                                            <div class="modal-body">
                                                <table id="tb-respuesta-transaccion" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="tb-respuesta-transaccion">
                                                    <thead>
                                                        <tr role="row">
                                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-respuesta-transaccion" rowspan="1" colspan="1">Trasmision</th>
                                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-respuesta-transaccion" rowspan="1" colspan="1">Resultado</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="modal-footer">

                                                <button type="button" class="btn btn-primary" id="btn-renviar-trasmisiones" data-dismiss="modal">Cerrar</button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>


                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>

                <div class="col-md-12">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa  fa-table"></i>
                            <h3 class="box-title text-warning">Notificacion con incidentes</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">
                            <div class="form-group" style="margin: 10px 0px 45px 0px;">
                                <div>

                                    <div class="col-sm-12 col-md-12 col-lg-4">
                                        <div title="Breve explicacion sobre el tipo de incidente" class="tipo-transacciones tipo-transacciones-1" data-toggle="tooltip"></div>
                                        <label>Incumplimiento del tiempo de procesamiento de la notificacion</label>

                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-4">
                                        <div title="Breve explicacion sobre el tipo de incidente" class="tipo-transacciones tipo-transacciones-2" data-toggle="tooltip"></div>
                                        <label>Notificacion procesada con errores</label>
                                    </div>


                                </div>


                            </div>

                            <div class="col-sm-12">
                                <table id="tb-notificacion-incidente" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="tb-notificacion-incidente">
                                    <thead>
                                        <tr role="row">
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1"></th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Tipo</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Entidad</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">VE Id</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">VC Id</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Mensaje</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Documento</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Nro Documento</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Fec. Recepcion.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Fec. Procesamiento.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">Antiguedad.</th>
                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-transaccion-incidente" rowspan="1" colspan="1">XML</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                            <div>
                                <div class="col-sm-12 col-md-12 col-lg-2 pull-right" style="margin-bottom: 8px;margin-top: 25px;">
                                    <button type="button" class="btn btn-block btn-primary" data-toggle="modal" data-target="#modal-reprocesar-notificacion">Reprocesar notificaciones</button>
                                </div>
                                <div class="col-sm-12 col-md-12 col-lg-2 pull-right" style="margin-bottom: 8px;margin-top: 25px;">
                                    <button type="button" class="btn btn-block btn-primary" data-toggle="modal" data-target="#modal-anular-notificacion">Anular notificaciones</button>
                                </div>

                                <div class="modal fade" id="modal-anular-notificacion">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">x</span></button>
                                                <h4 class="modal-title">Confirmacion</h4>
                                            </div>
                                            <div class="modal-body">
                                                <p>Esta Seguro de Anular las Notificaciones?</p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cerrar</button>
                                                <button type="button" class="btn btn-primary" id="btn-anular-notificacion">Enviar</button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>
                                <div class="modal fade" id="modal-reprocesar-notificacion">
                                    <div class="modal-dialog modal-sm">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">x</span></button>
                                                <h4 class="modal-title">Confirmacion</h4>
                                            </div>
                                            <div class="modal-body">
                                                <p>Esta Seguro de Reprocesar las Notificaciones?</p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cerrar</button>
                                                <button type="button" class="btn btn-primary" id="btn-reprocesar-notificacion">Enviar</button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>

                                <div class="modal fade" id="modal-notificacion-response">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">x</span></button>
                                                <h4 class="modal-title">Respuesta Notificacion</h4>
                                            </div>
                                            <div class="modal-body">
                                                <table id="tb-respuesta-notificacion" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="tb-respuesta-notificacion">
                                                    <thead>
                                                        <tr role="row">
                                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-respuesta-notificacion" rowspan="1" colspan="1">Notificacion</th>
                                                            <th  style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-respuesta-notificacion" rowspan="1" colspan="1">Resultado</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="modal-footer">

                                                <button type="button" class="btn btn-primary" id="btn-renviar-trasmisiones" data-dismiss="modal">Cerrar</button>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>





                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>

                <div class="col-md-12">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa  fa-table"></i>
                            <h3 class="box-title text-warning">Frecuencia de Lectura de Transacciones</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">


                            <div class="col-sm-12">
                                <table id="tb-frecuencia-transacciones" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="tb-frecuencia-transacciones">
                                    <thead>
                                        <tr role="row">                                 
                                            <th style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-frecuencia-transacciones" rowspan="1" colspan="1">Entidad</th>
                                            <th style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-frecuencia-transacciones" rowspan="1" colspan="1">Activo</th>
                                            <th style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-frecuencia-transacciones" rowspan="1" colspan="1">Fec. Lectura Esperada</th>
                                            <th style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-frecuencia-transacciones" rowspan="1" colspan="1">Fec. Lectura Actual</th>
                                            <th style="text-align: center;" class="sorting" tabindex="0" aria-controls="tb-frecuencia-transacciones" rowspan="1" colspan="1">Cumplimiento</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                            <div>
                                <div class="col-sm-12 col-md-12 col-lg-2 pull-right" style="margin-bottom: 8px;margin-top: 25px;margin-right: 10px;">
                                    <button type="button" class="btn btn-block btn-primary">Programacion de Mantenimientos</button>
                                </div>

                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>


                <!-- /.col -->
            </div>

        </section>

        <script>



        </script>



        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>




    </ui:define>
</ui:composition>