<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    template="master.xhtml">
    <ui:define name="content">

        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Reporte VUCE - Entidad     
            </h1>           
        </section>

        <!-- Main content -->
        <section class="content container-fluid">

            <div class="col-md-12" style="padding-right: 1px; padding-left: 1px;">
                <!-- general form elements -->
                <div class="box box-danger">
                    <div class="box-header with-border">
                        <h3 class="box-title">FILTRO<small></small></h3>                          
                    </div>                  
                    <div class="box-body">

                        <div class="form-group">                             

                            <div style="margin: 10px 0px 0px 0px;">
                                <label for="unidad-organica" class="col-sm-12 col-md-12 col-lg-2 control-label text-left">Fecha desde</label>
                                <div class="col-sm-12 col-md-12 col-lg-3">
                                    <p:calendar showOn="button"  value=""  />    
                                </div>                            
                                <label for="unidad-organica" class="col-sm-12 col-md-12 col-lg-2 control-label text-left">Fecha hasta</label>
                                <div class="col-sm-12 col-md-12 col-lg-3">
                                    <p:calendar showOn="button" value=""  />    
                                </div>   
                                <div class="col-sm-12 col-md-12 col-lg-2">
                                    <p:commandButton icon="fa fa-search" id="btn-buscar-reemplazo" value="Buscar" styleClass="btn bg-red btn-flat margin"  />
                                </div>  
                            </div>

                        </div>  


                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa fa-pie-chart"></i>
                            <h3 class="box-title text-danger">Transacciones Procesadas</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">
                            <canvas id="transacciones-procesadas" width="80" height="80"></canvas>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.col -->

                <div class="col-md-4">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa fa-pie-chart"></i>
                            <h3 class="box-title text-blue">Notificaciones Procesadas</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">
                            <canvas id="notificaciones-procesadas" width="80" height="80"></canvas>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.col -->

                <div class="col-md-4">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa fa-pie-chart"></i>
                            <h3 class="box-title text-warning">Incidentes</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">
                            <canvas id="incidentes" width="80" height="80"></canvas>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>

                <div class="col-md-12">
                    <div class="box box-solid">
                        <div class="box-header">
                            <i class="fa  fa-table"></i>
                            <h3 class="box-title text-warning">Incidentes</h3>

                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i></button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body text-center">


                            <h:form id="form">
                               
                                <p:dataTable var="resumen"  styleClass="table table-bordered"
                                              paginator="true" reflow="true" rows="5"
                                             value="#{reporteTransaccionesBean.resumenTransacciones}" >
                                    
                                    <p:column headerText="Entidad">
                                        <h:outputText value="#{resumen.entidad}" />
                                    </p:column>

                                    <p:column headerText="Transacciones">
                                        <h:outputText value="#{resumen.transacciones}" />
                                    </p:column>

                                    <p:column headerText="Notificaciones">
                                        <h:outputText value="#{resumen.notificaciones}" />
                                    </p:column>

                                    <p:column headerText="Incidentes">
                                        <h:outputText value="#{resumen.incidentes}" />
                                    </p:column>

                                   
                                </p:dataTable>
                            </h:form>


                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>


                <!-- /.col -->
            </div>

        </section>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>


        <script>
            var ctxTransaccionesProcesadas = document.getElementById("transacciones-procesadas").getContext('2d');
            var myChartTransaccionesProcesadas = new Chart(ctxTransaccionesProcesadas, {
                type: 'pie',
                data: {

                    labels: ["Senasa", "APN", "DICAPI", "Osierming", "Otros"],
                    cutoutPercentage: 50,

                    datasets: [{
                            label: '# of Votes',
                            data: [12, 19, 10, 8, 9],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.5)',
                                'rgba(54, 162, 235, 0.5)',
                                'rgba(255, 206, 86, 0.5)',
                                'rgba(75, 192, 192, 0.5)',
                                'rgba(153, 102, 255, 0.5)',
                                'rgba(255, 159, 64, 0.5)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,0.3)',
                                'rgba(54, 162, 235, 0.3)',
                                'rgba(255, 206, 86, 0.3)',
                                'rgba(75, 192, 192, 0.3)',
                                'rgba(153, 102, 255, 0.3)',
                                'rgba(255, 159, 64, 0.3)'
                            ],
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true
                }
            });
            var ctxNotificacionesProcesadas = document.getElementById("notificaciones-procesadas").getContext('2d');
            var myChartNotificacionesProcesadas = new Chart(ctxNotificacionesProcesadas, {
                type: 'pie',
                data: {
                    labels: ["Senasa", "APN", "DICAPI", "Osierming", "Otros"],
                    datasets: [{
                            label: '# of Votes',
                            data: [60, 45, 30, 15, 55],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.5)',
                                'rgba(54, 162, 235, 0.5)',
                                'rgba(255, 206, 86, 0.5)',
                                'rgba(75, 192, 192, 0.5)',
                                'rgba(153, 102, 255, 0.5)',
                                'rgba(255, 159, 64, 0.5)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,0.3)',
                                'rgba(54, 162, 235, 0.3)',
                                'rgba(255, 206, 86, 0.3)',
                                'rgba(75, 192, 192, 0.3)',
                                'rgba(153, 102, 255, 0.3)',
                                'rgba(255, 159, 64, 0.3)'
                            ],
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true
                }
            });
            var ctxIncidencias = document.getElementById("incidentes").getContext('2d');
            var myChartIncidencias = new Chart(ctxIncidencias, {
                type: 'pie',
                data: {
                    labels: ["Senasa", "APN", "DICAPI", "Osierming", "Otros"],
                    datasets: [{
                            label: '# of Votes',
                            data: [12, 19, 10, 8, 9],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.5)',
                                'rgba(54, 162, 235, 0.5)',
                                'rgba(255, 206, 86, 0.5)',
                                'rgba(75, 192, 192, 0.5)',
                                'rgba(153, 102, 255, 0.5)',
                                'rgba(255, 159, 64, 0.5)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,0.3)',
                                'rgba(54, 162, 235, 0.3)',
                                'rgba(255, 206, 86, 0.3)',
                                'rgba(75, 192, 192, 0.3)',
                                'rgba(153, 102, 255, 0.3)',
                                'rgba(255, 159, 64, 0.3)'
                            ],
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true
                }
            });
        </script>


        <script>




            $(".sparkline").each(function () {
                var $this = $(this);
                $this.sparkline('html', $this.data());
            });

        </script>

    </ui:define>
</ui:composition>